/*******************************************************************************
* Indigo v0.2 
********************************************************************************
* Name          : dashboard.js
* Description   : renders dashboard
* Author        : Scott Walkinshaw
* Date          : 29th December 2011
* Parameters    : 
* Comments      :


  Ext.Msg.alert('Status', 'test');

********************************************************************************
*                                                                          
********************************************************************************
* File Modification History                                                    *
********************************************************************************
* Inits | Vers | Date      | Description                                       *
* SW    | 1.0  | 29 Dec 11 | Initial issue                                     *
*******************************************************************************/
function f_dashboard() {


  /****
  *  Campaign reports model
  ****/
  Ext.define('indigo.db_campaign_model', {
    extend: 'Ext.data.Model',
    fields: [
      { name : 'campaign_id',        type : 'int'},
      { name : 'campaign_type_id',   type : 'int'},
      { name : 'campaign_type',      type : 'string'},
      { name : 'campaign_name',      type : 'string'},
      { name : 'campaign_status',    type : 'string'},
      { name : 'campaign_email_id',  type : 'int'},
      { name : 'description',        type : 'string'},
      { name : 'start_date',         type : 'string'},
      { name : 'end_date',           type : 'string'},
      { name : 'email_id',           type : 'string'},
      { name : 'email_name',         type : 'string'},
      { name : 'created_by',         type : 'string'},
      { name : 'created_date',       type : 'string'},
      { name : 'modified_by',        type : 'string'},
      { name : 'modified_date',      type : 'string'},
    ]
  });

  /****
  *  Campaign reports store
  ****/
  var s_db_campaigns = Ext.create('Ext.data.Store', {
                     model           : 'indigo.db_campaign_model',
                     clearOnPageLoad : true,
                     autoLoad        : true,
                     proxy           : {
                     type            : 'ajax',
                     url             : 'fetch_campaigns.php',
                     actionMethods   : {
                       create  : 'POST',
                       read    : 'POST',
                       update  : 'POST',
                       destroy : 'POST'
                    },
                    reader           : {
                    id            : 'term',
                    type          : 'json',
                    root          : 'results',
                    totalProperty : 'total'
                  }
                }
              });


      /****
      *  Logo panel
      var v_url = f_render_image('images/datamine_logo_600.jpg');
      Ext.define('indigo.p_logo2', {
                   extend     : 'Ext.panel.Panel',
                   id         : 'p_logo2',
                   xtype      : 'form',
                   alias      : 'widget.p_logo2',
                   region     : 'center',
                   frame      : true,
                   border     : false,
                   height     : 105,
                   items      : [
                     {
                       xtype    : 'component',
                       id       : 'pl_spacer12',
                       height   : 10
                     },
                     {
                       xtype    : 'component',
                       id       : 'pl_image2',
                       flex     : 1,
                       readOnly : true,
                       html     : v_url
                     },
                     {
                       xtype    : 'component',
                       id       : 'pl_spacer22',
                       height   : 10
                     },
                   ]
                 });
      ****/


      /****
      *  Dashboard panel
      ****/
      return Ext.define('indigo.p_dashboard2', {
                    extend : 'Ext.Panel',
                    alias  : 'widget.p_dashboard2',
                    title  : 'Dashboard',
                    layout : {
                       type : 'border'
                    },
/*
                   items  : [
                     {
                       xtype : 'p_logo2'
                     },
                     {
                       xtype : 'p_data'
                     },
                     {
                       xtype : 'g_db_campaigns'
                     },
                     {
                       xtype : 'p_db_south'
                     }
                   ]
*/
                 });
};
